:root { --bg:#0b1020; --panel:#12182b; --accent:#6fa8ff; --muted:#9bb1d6; --grid:#1e2745; }
* { box-sizing: border-box; }
html, body, #root { height:100%; margin:0; background:var(--bg); color:#e6eefc; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Noto Sans, "Apple Color Emoji", "Segoe UI Emoji"; }
.app { display:flex; height:100%; }
.left { width:360px; padding:16px; background:var(--panel); border-right:1px solid var(--grid); overflow:auto; }
.right { flex:1; display:flex; flex-direction:column; }
.stage { flex:1; min-height:300px; position:relative; }
.hud { display:grid; grid-template-columns: 1fr 1fr; gap:16px; padding:12px; background:rgba(0,0,0,0.25); border-top:1px solid var(--grid); }
h1 { font-weight:700; font-size:20px; margin:0 0 8px; }
h2 { font-weight:600; font-size:14px; margin:16px 0 8px; color:var(--muted); text-transform:uppercase; letter-spacing:.08em; }
.row { margin:8px 0; }
.slider { width:100%; }
.value { font-variant-numeric: tabular-nums; color:#d6e3ff; }
.grid { display:grid; grid-template-columns: 1fr 1fr; gap:8px; }
.card { background:#0f1529; border:1px solid var(--grid); border-radius:12px; padding:12px; }
.amp { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
.prob { height:12px; background:#0b1226; border:1px solid var(--grid); border-radius:8px; overflow:hidden; }
.prob > div { height:100%; background:var(--accent); }
canvas.wave { width:100%; height:80px; display:block; background:#0c1330; border-radius:8px; border:1px solid var(--grid); }
.purity { font-weight:600; }
.legend { display:flex; gap:8px; font-size:12px; color:var(--muted); }
.legend span { display:inline-flex; align-items:center; gap:6px; }
.dot { width:10px; height:10px; border-radius:50%; background:var(--accent); display:inline-block; }
/* Allow the middle panel to grow/shrink correctly in a flex column */
.right { min-height: 0; }

/* The outer stage container (you already have this — you can keep your values) */
.stage {
  flex: 1 1 0;
  min-height: 480px;        /* bump if you want it taller by default */
  position: relative;
}

/* Make the inner BlochSphere mount fill the outer .stage */
.bloch-mount {
  width: 100%;
  height: 100%;
}

/* Ensure the canvas fills and doesn’t leave gaps */
.stage canvas {
  position: absolute;        /* let it cover the stage */
  inset: 0;
  width: 100% !important;
  height: 100% !important;
  display: block;
}
